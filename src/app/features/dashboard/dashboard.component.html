<div class="space-y-6">
  <h1 class="text-3xl font-bold text-slate-800">Dashboard</h1>
  
  <!-- Cards Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
    <!-- Total Balance -->
    <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 flex flex-col justify-between h-32">
        <div class="text-sm font-medium text-slate-500 uppercase">Total Household</div>
        <div class="text-3xl font-bold text-slate-800">{{ totalBalance() | currency:'EUR' }}</div>
    </div>

     <!-- Dynamic Individual Members -->
     <div *ngFor="let m of memberBalances()" class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 flex flex-col justify-between h-32 relative overflow-hidden">
          <div class="absolute right-0 top-0 p-4 opacity-10"><i [class]="m.name === 'Joint' ? 'pi pi-users' : 'pi pi-user'" class="text-6xl"></i></div>
         <div class="text-sm font-medium text-slate-500 uppercase">{{ m.name }}</div>
         <div class="text-3xl font-bold text-slate-800">{{ m.balance() | currency:'EUR' }}</div>
     </div>
  </div>

  <!-- Recent Activity -->
  <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6">
    <div class="flex items-center justify-between mb-6">
        <h2 class="text-xl font-bold text-slate-800">Recent Transactions</h2>
        <div class="flex gap-3">
             <button 
                *ngIf="hasSelection()"
                pButton 
                label="Bulk Edit ({{selectedCount()}})" 
                icon="pi pi-pencil" 
                class="p-button-outlined p-button-warning p-button-sm"
                (click)="openBulkEditDialog()"
            ></button>
            <button routerLink="/reports" class="text-sm text-indigo-600 font-medium hover:underline flex items-center h-full">View All</button>
        </div>
    </div>

    <div class="overflow-x-auto">
        <table class="w-full text-left border-collapse">
            <thead>
                <tr class="text-slate-400 text-xs uppercase tracking-wider border-b border-slate-100">
                    <th class="w-12 text-center p-2">
                         <p-checkbox 
                            [binary]="true" 
                            (onChange)="toggleSelectAll()"
                            [ngModel]="selectedCount() === recentTransactions().length && recentTransactions().length > 0"
                        ></p-checkbox>
                    </th>
                    <th class="p-3 font-semibold">Date</th>
                    <th class="p-3 font-semibold">Description</th>
                    <th class="p-3 font-semibold">Category</th>
                    <th class="p-3 font-semibold">Member</th>
                    <th class="p-3 font-semibold text-right">Amount</th>
                    <th class="p-3 font-semibold w-10"></th>
                </tr>
            </thead>
            <tbody class="text-sm text-slate-600">
                <tr *ngFor="let t of recentTransactions()" class="border-b border-slate-50 hover:bg-slate-50" [class.bg-amber-50]="isSelected(t.id)">
                    <td class="text-center p-2">
                        <p-checkbox 
                            [binary]="true" 
                            [ngModel]="isSelected(t.id)" 
                            (onChange)="toggleSelection(t.id)"
                        ></p-checkbox>
                    </td>
                    <td class="p-3">{{ t.date | date:'shortDate' }}</td>
                    <td class="p-3 font-medium text-slate-800">{{ t.description }}</td>
                    <td class="p-3"><span class="px-2 py-1 rounded-full bg-slate-100 text-xs">{{ t.categoryName }}</span></td>
                    <td class="p-3">{{ t.member }}</td>
                    <td class="p-3 text-right font-bold" [class.text-emerald-500]="t.type === 'Income'" [class.text-rose-500]="t.type === 'Expense'">
                        {{ t.type === 'Income' ? '+' : '-' }} {{ t.amount | currency:'EUR' }}
                    </td>
                    <td class="p-3 text-right">
                        <button [routerLink]="[t.type === 'Income' ? '/income' : '/expense', t.id]" class="text-slate-400 hover:text-amber-500 transition-colors mr-2">
                             <i class="pi pi-pencil"></i>
                        </button>
                         <button (click)="deleteTransaction(t.id)" class="text-slate-400 hover:text-rose-500 transition-colors">
                            <i class="pi pi-trash"></i>
                        </button>
                    </td>
                </tr>
                <tr *ngIf="recentTransactions().length === 0">
                    <td colspan="7" class="p-8 text-center text-slate-400">No transactions yet. Start by adding one!</td>
                </tr>
            </tbody>
        </table>
    </div>
  </div>
</div>
